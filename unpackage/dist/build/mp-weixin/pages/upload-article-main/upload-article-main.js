(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/upload-article-main/upload-article-main"],{"0b64":function(e,t,o){"use strict";o.r(t);var a=o("4452"),n=o("af58");for(var c in n)"default"!==c&&function(e){o.d(t,e,(function(){return n[e]}))}(c);o("70eb");var r,i=o("f0c5"),u=Object(i["a"])(n["default"],a["b"],a["c"],!1,null,"1c7cf786",null,!1,a["a"],r);t["default"]=u.exports},4350:function(e,t,o){"use strict";(function(e){o("7fe4");a(o("66fd"));var t=a(o("0b64"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("543d")["createPage"])},4452:function(e,t,o){"use strict";var a;o.d(t,"b",(function(){return n})),o.d(t,"c",(function(){return c})),o.d(t,"a",(function(){return a}));var n=function(){var e=this,t=e.$createElement;e._self._c},c=[]},"70eb":function(e,t,o){"use strict";var a=o("e3cc"),n=o.n(a);n.a},af58:function(e,t,o){"use strict";o.r(t);var a=o("fe8f"),n=o.n(a);for(var c in a)"default"!==c&&function(e){o.d(t,e,(function(){return a[e]}))}(c);t["default"]=n.a},e3cc:function(e,t,o){},fe8f:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(o("a34a"));function n(e){return e&&e.__esModule?e:{default:e}}function c(e,t,o,a,n,c,r){try{var i=e[c](r),u=i.value}catch(s){return void o(s)}i.done?t(u):Promise.resolve(u).then(a,n)}function r(e){return function(){var t=this,o=arguments;return new Promise((function(a,n){var r=e.apply(t,o);function i(e){c(r,a,n,i,u,"next",e)}function u(e){c(r,a,n,i,u,"throw",e)}i(void 0)}))}}var i={data:function(){return{title:"",cover:[],coverName:[],mode:"",modeRadio:[{label:"普通",value:"base",checked:!1},{label:"多图",value:"column",checked:!1},{label:"大图",value:"image",checked:!1}]}},onLoad:function(){this.title=e.getStorageSync("title"),this.mode=e.getStorageSync("mode"),this.cover=e.getStorageSync("cover")||[],this.coverName=e.getStorageSync("coverName")||[]},methods:{deleteCover:function(e){this.cover.splice(e,1),this.coverName.splice(e,1)},editContent:function(){e.setStorageSync("title",this.title),e.setStorageSync("mode",this.mode),e.setStorageSync("cover",this.cover),e.setStorageSync("coverName",this.coverName),e.navigateTo({url:"../upload-article/upload-article"})},uploadArticle:function(){var t=this;return r(a.default.mark((function o(){var n;return a.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return console.log(e.getStorageSync("content")),o.next=3,t.$myRequest({methods:"POST",data:t.$axios.adornData({title:t.title,authorId:e.getStorageSync("author").id,content:e.getStorageSync("content"),cover:JSON.stringify(t.cover),mode:t.mode,createTime:(new Date).getTime(),classify:"推友分享",browseCount:0,thumbsUpCount:0,collectionCount:0}),header:{token:e.getStorageSync("token")||"","Content-Type":"application/json; charset=UTF-8"},url:"/arct/article/save"});case 3:n=o.sent,0===n.data.code?(e.showToast({title:"上传成功"}),e.setStorageSync("title",""),e.setStorageSync("mode",""),e.setStorageSync("cover",[]),e.setStorageSync("coverName",[]),e.switchTab({url:"/pages/tabbar/my/my"})):e.showToast({title:"上传失败"});case 5:case"end":return o.stop()}}),o)})))()},radioChange:function(e){this.mode=e.detail.value,this.modeRadio.forEach((function(t){t.value===e.detail.value?t.checked=!0:t.checked=!1})),console.log(this.mode)},uploadCover:function(){var t=this;if(e.setStorageSync("title",this.title),e.setStorageSync("mode",this.mode),e.setStorageSync("cover",this.cover),e.setStorageSync("coverName",this.coverName),3===this.cover.length)return e.showToast({title:"最多可上传三张"}),!1;e.chooseImage({success:function(o){var a=o.tempFilePaths;e.uploadFile({url:"https://lzebaba.club/renren-fast/api/upload",filePath:a[0],name:"file",header:{token:e.getStorageSync("token")},success:function(e){console.log(t.cover),console.log(e.data);var o={name:JSON.parse(e.data).name,url:JSON.parse(e.data).url};t.cover.push(o),t.coverName.push(JSON.parse(e.data).name)}})}})}}};t.default=i}).call(this,o("543d")["default"])}},[["4350","common/runtime","common/vendor"]]]);